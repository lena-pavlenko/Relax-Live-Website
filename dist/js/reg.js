(()=>{const e=document.querySelector("form");let t=document.getElementById("name"),n=document.getElementById("type");const a=e.querySelectorAll(".text-warning");n.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[а-яА-я\-\ ]/g,"")}));const o=()=>fetch("../db/dbUsers.json").then((e=>e.json()));function r(e,t,n={}){(n={path:"/",...n}).expires instanceof Date&&(n.expires=n.expires.toUTCString());let a=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in n){a+="; "+e;let t=n[e];!0!==t&&(a+="="+t)}document.cookie=a}const s=()=>{t=document.getElementById("name"),n=document.getElementById("type"),t.value="",n.value=""};e.addEventListener("submit",(e=>{e.preventDefault();let c=t.value.trim(),m=n.value.trim(),d={};d.name=c,d.password=m,o().then((e=>{e.forEach((e=>{d.name!==e.name?(a[0].classList.add("active"),s()):(a[0].classList.remove("active"),d.password!==e.password?(a[1].classList.add("active"),s()):(r("userName",d.name,{secure:!0,"max-age":86400}),r("userPassword",d.password,{secure:!0,"max-age":86400}),setTimeout((function(){window.location.href="/admin/table.html"}),500)))}))}))}));let c=function(e){let t=document.cookie.match(new RegExp("(?:^|; )"+"userName".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}();o().then((e=>{e.forEach((e=>{if("/admin/table.html"===window.location.pathname){if(c===e.name)return!0;window.location.href="/admin/index.html"}}))}))})();