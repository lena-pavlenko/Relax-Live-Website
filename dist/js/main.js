(()=>{"use strict";const e=e=>{let t=document.documentElement.scrollTop+e.getBoundingClientRect().top;window.scrollTo({top:t,behavior:"smooth"})},t=(e,t,o=".popup-dialog")=>{const r=document.querySelectorAll(e),s=document.querySelector(t),c=document.querySelector(".popup-menu"),l=c.querySelector(".popup-dialog-menu");r.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),s.classList.add("show-popup"),c.classList.remove("show-popup"),l.classList.remove("show-menu"),s.addEventListener("click",(e=>{!e.target.closest(".close")&&e.target.closest(o)||s.classList.remove("show-popup")}))}))}))};(()=>{const e=document.querySelector(".header-contacts"),t=e.querySelector(".header-contacts__phone-number-accord");e.addEventListener("click",(e=>{if(e.target.closest(".header-contacts__arrow")){const o=e.target.closest(".header-contacts__arrow");o.classList.toggle("rotate");const r=t.querySelector("a");o.classList.contains("rotate")?(t.style.top="25px",r.style.opacity="1"):(t.style.top="0px",r.style.opacity="0")}}))})(),(()=>{const t=document.querySelector(".menu__icon"),o=document.querySelector(".popup-menu"),r=o.querySelector(".popup-dialog-menu"),s=()=>{o.classList.toggle("show-popup"),r.classList.toggle("show-menu")};t.addEventListener("click",(()=>{s()})),o.addEventListener("click",(t=>{if(!t.target.closest(".close-menu")&&t.target.closest(".popup-dialog-menu")||s(),t.target.closest(".popup-menu-nav__item")){t.preventDefault(),s();let o=document.querySelector(t.target.getAttribute("href"));e(o)}}))})(),(()=>{const t=document.querySelector(".button-footer"),o=document.getElementById("main");t.addEventListener("click",(t=>{t.preventDefault(),e(o)}))})(),t(".link-list",".popup-repair-types"),t(".link-privacy",".popup-privacy"),t(".button_wide",".popup-consultation",".feedback-wrap"),function(){const e=function(e){let t=e.target,o=t.dataset.phoneClear,r=t.dataset.phonePattern||"+7(___) ___-__-__",s=0,c=r.replace(/\D/g,""),l=e.target.value.replace(/\D/g,"");"false"!==o&&"blur"===e.type&&l.length<r.match(/([\_\d])/g).length?e.target.value="":(c.length>=l.length&&(l=c),e.target.value=r.replace(/./g,(function(e){return/[_\d]/.test(e)&&s<l.length?l.charAt(s++):s>=l.length?"":e})))},t=document.querySelectorAll("[data-phone-pattern]");for(let o of t)for(let t of["input","blur","focus"])o.addEventListener(t,e)}(),document.querySelectorAll(".formula-item").forEach((e=>{e.addEventListener("mouseover",(e=>{if(e.target.closest(".formula-item__icon")){const t=e.target.closest(".formula-item__icon").querySelector(".formula-item-popup");t.style.visibility="visible",t.style.opacity="1";let o=e.target.getBoundingClientRect();t.offsetHeight>o.top?(t.classList.add("rotate-hint"),t.style.transform=`translate3d(0, ${t.offsetHeight+e.target.offsetHeight+e.target.offsetHeight}px, 0)`):(t.classList.remove("rotate-hint"),t.style.transform="")}})),e.addEventListener("mouseleave",(e=>{const t=e.target.querySelector(".formula-item__icon").querySelector(".formula-item-popup");t.style.visibility="",t.style.opacity=""}))})),document.querySelectorAll(".title_block").forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("msg-active")}))})),((e=document.querySelectorAll("form"))=>{const t=document.querySelector(".popup-thank");t.addEventListener("click",(e=>{!e.target.closest(".close")&&e.target.closest(".feedback-wrap")||(t.style.visibility="hidden")}));e.forEach((e=>{e.addEventListener("submit",(o=>{o.preventDefault(),(e=>{const o=(e=>{const t=e.querySelectorAll("input"),o={};return t.forEach((e=>{""===e.value||"checkbox"==e.type&&!1===e.checked?(o[e.name]=!0,"checkbox"!==e.type&&e.classList.add("wrong"),"checkbox"===e.type&&(e.labels[0].style.border="1px solid red")):(o[e.name]=!1,"checkbox"!==e.type&&e.classList.remove("wrong"),"checkbox"===e.type&&(e.labels[0].style.border="1px solid #322823"))})),o})(e);for(let e in o)if(!0===o[e])return!1;const r=new FormData(e),s={};var c;r.forEach(((e,t)=>{s[t]=e.trim()})),(c=s,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((o=>{t.style.visibility="visible",setTimeout((()=>{t.style.visibility="hidden"}),2e3),e.reset()})).catch((e=>{alert("Произошла ошибка. пока что тестовое окно")}))})(e)}))}))})()})();