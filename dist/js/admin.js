(()=>{"use strict";(()=>{const e=document.querySelector("form");let t=document.getElementById("name"),n=document.getElementById("type");const o=e.querySelectorAll(".text-warning");n.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[а-яА-я\-\ ]/g,"")}));const a=()=>fetch("../db/dbUsers.json").then((e=>e.json()));function s(e,t,n={}){(n={path:"/",...n}).expires instanceof Date&&(n.expires=n.expires.toUTCString());let o=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in n){o+="; "+e;let t=n[e];!0!==t&&(o+="="+t)}document.cookie=o}const c=()=>{t=document.getElementById("name"),n=document.getElementById("type"),t.value="",n.value=""};e.addEventListener("submit",(e=>{e.preventDefault();let r=t.value.trim(),m=n.value.trim(),i={};i.name=r,i.password=m,a().then((e=>{e.forEach((e=>{i.name!==e.name?(o[0].classList.add("active"),c()):(o[0].classList.remove("active"),i.password!==e.password?(o[1].classList.add("active"),c()):(console.log(i.name),s("userName",i.name,{secure:!0,"max-age":3600}),s("userPassword",i.password,{secure:!0,"max-age":3600}),setTimeout((function(){window.location.href="/admin/table.html"}),500)))}))}))}));let r=function(e){let t=document.cookie.match(new RegExp("(?:^|; )"+"userName".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}();console.log(),a().then((e=>{e.forEach((e=>{if("/admin/table.html"===window.location.pathname){if(r===e.name)return!0;window.location.href="/admin/index.html"}}))}))})()})();